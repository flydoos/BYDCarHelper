# ❓常见问题

此处记录一些常见问题，需要对大家有所帮助，如果没有找到你想要的答案，欢迎在“Issues”提问！ 

## 1、如何设置钉钉机器人？

### 一、添加钉钉群机器人

创建一个钉钉群——群设置——智能群助手——添加机器人——选择“自定义”（通过Webhook接入自定义服务）——添加——填写机器人名称“小迪”——安全设置勾选“加签”——完成

![钉钉机器人设置截图](https://cdn.jsdelivr.net/gh/flydoos/BYDCarHelper/Images/Robot-1.0.0.png)

### 二、修改配置

需要把“Webhook”地址，以及“加签”的秘钥信息复制下来，打开“比亚迪车辆助手”程序，通过“设置”界面进行配置

## 2、如何添加开机启动？

只需要创建一个桌面快捷方式，让后把快捷方式放到这个“开始菜单”目录下即可：

C:\Users\用户名\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup

也可以通过 Windows开始菜单——运行——shell:startup 打开“开始菜单”所在路径

## 3、使用PicGo+七牛云实现图片上传功能？

### 一、安装教程

查看教程：[《使用PicGo+七牛云实现图片上传功能（制作自己的图床网站）》](https://www.wuleba.com/?p=1919)

### 二、修改配置

打开“比亚迪车辆助手”程序，通过“设置”界面进行配置，把“是否需要上传图片”从默认的“否”改成“是”

## 4、已经安装PC版微信，车辆助手程序也启动了，但是无法获取Cookie？

1、请使用PC版微信3.9.2.x以上版本，或者是最新版微信，以前的旧版本可能不支持，导致出现一些未知报错

2、如果你的PC版微信使用“兼容模式”运行，将会导致无法附加进程，从而无法获取Cookie，需要在桌面图标中取消微信的“兼容模式”运行

3、有些时候车辆助手会被杀软拦截，需要手动添加进白名单，否则也会导致无法获取Cookie

4、大概率是因为微信版本更新了，导致Cookies规则有变，可以打开路径：C:\Users[改成你的用户名]\AppData\Roaming\Tencent\WeChat  ，把这个WeChat文件夹删除或者改成其他任意名字，然后重启微信，重新使用助手获取Cookies试试（这个方法可以解决大部分微信兼容问题，但是，可能过段时间后又会被还原导致无效，重新按照此操作再改一次即可）

5、如果还是无法解决，建议你把微信版本降级到3.9.2.23，或者请加Q群，请加Q群：223541319，联系作者远程协助处理

## 5、当车辆正在充电时，不会发钉钉/飞书消息，也不会触发智能上电、智能锁车等任务？

这个是正常的，因为充电会导致里程增加，然后造成钉钉/飞书消息骚扰。而且充电时需要打开窗户、甚至频繁上下车，所以智能XXX任务并不适合出现。

## 6、为什么没有推送钉钉/飞书消息？

当车辆总续航里程增加/减少1公里以上（比如：行驶了1公里，或者开空调耗电导致续航减少了1公里），且停车手动关闭电源后，才会向钉钉/飞书推送行程信息。

## 7、手动获取Cookie正常，但是无法自动续期Cookie？

常见原因如下：

1、计算机设置了休眠，需要关闭休眠

2、你的网络是不是会自动断开（比如公司网络，需要确保24小时互联网在线）

3、PC微信没有开启

4、如果手动获取Cookie，尝试了多次依然失败，请进QQ群联系作者协助

## 8、已经成功获取Cookie，但是无法查询车辆信息？

一般是因为Cookie过期了。具体原因是：获取Cookie的时候，第一次会获取到“上次已经过期的Cookie”，建议等2分钟之后再重新获取，这样才可以获取到“上次重新获取的Cookie”，所以，当你们的Cookie过期之后，重新获取2次就可以了（如果不行就再等几分钟，然后重新获取）~~

## 9、全部都设置好了，但是去到车库，发现没办法智能上电？

1、请确定“远程密码”跟APP中的远程操作密码一致，如果密码不正确，将会无法执行远程控制命令（90%用户，都是这个原因导致无法智能上电，你可以在软件首页点击“车门上锁”看看能否操作成功，成功的话再去车库测试就可以了）

2、请确保车辆停放在有网络信号的地方，比如有中国移动的手机信号，不然可能无法接收网络指令

3、比亚迪APP拆分之后，数据同步实时性降低了，有些时候，需要打开车门，先不要关闭车门，等待15秒左右才会上电，这个是因为数据同步不及时导致，需要BYD官方才能解决（正常的话是5秒内上电）

4、如果以上问题都确认了没有异常，但是依然无法智能上电，可以查看 \Log\xxxx-xx-xx.log 的日志文件，看看是否存在“远程执行"XXX"命令”，看看返回的数据是否正常。如果还是无法解决，请加Q群：223541319，联系作者远程协助处理

## 10、为什么有些时候查询出来的里程数据，跟APP不一致？

“比亚迪DiLink”官方公众号数据存在BUG，当车辆油量续航大于或等于1000KM时，查询出来的油量续航等于-1KM，并且总续航只会统计纯电续航部分，这就导致油量续航数据丢失。

为了解决这个问题，本程序进行适配，当剩余油量大于0，且油量续航等于-1KM时，油量续航均显示为1000KM，总续航也会加上这个油量续航里程。但是如果你的真实油量续航大于1000KM，那么就会跟APP数据不一致。目前暂无其他方式解决，除非官方修复BUG。

## 11、为什么有些时候会推送多次钉钉/飞书消息？

消息推送功能，会有免打扰的设置，当车辆熄火后，如果总续航里程发生变化，就会自动推送一条消息。实际使用过程中发现，车辆熄火后，会存在“动态校正”行为，比如：开车的时候是打开了空调，假设续航100KM，熄火后，扣除空调的影响，续航可能会变成了110KM，这样就会导致推送了2条消息（当然，也有其他的校正行为）。

本来小编想改成“当剩余电量、剩余油量发生变化时”再去推送消息，但是如果这样做，就会导致程序显示的“里程数据”跟APP不一致，最终还是宁愿推送多次消息，确保数据一致性。

## 12、为什么有些时候查不出数据或者更新时间没变化？

1、可能是你的比亚迪Cookie写错了或者过期了（你可以测试界面上的功能，如果全部都用不了，那肯定过期了）

2、如果频繁请求比亚迪API接口，会被官方屏蔽一段时间（大概率是这个情况），这种情况，一般过几分钟、几十分钟就会自动恢复

3、如果想知道具体原因，可以点击“手动车况同步”，然后查看 \Log\xxxx-xx-xx.log 的日志文件。如果还是无法解决，请加Q群：223541319，联系作者远程协助处理

## 13、如何配置共享Cookie？

这个功能，需要你自己开发一个POST接口（http或者https都可以），然后接收JSON内容，数据格式：

	{
		Cookies:"xxx"
	}

你可以把接收后的Cookie共享到你的手机或者其它设备上，从而实现自动续期Cookie的功能。

但是，如果你不懂软件开发，那么是用不上这个功能的，无视即可。

## 14、自定义机器人，如何开发接收数据的接口？

自定义机器人只需要配置Webhook地址，不需要配置密钥信息。但是也需要你自己开发一个POST接口（http或者https都可以），然后接收JSON内容，数据格式：

	{
		//车况数据最后更新时间（秒）
		"time": 1708561852.0,
		
		//车门左前状态，0:关闭；1:开启
		"cmzq": 0.0,
		
		//车门右前状态，0:关闭；1:开启
		"cmyq": 0.0,
		
		//车门左后状态，0:关闭；1:开启
		"cmzh": 0.0,
		
		//车门右后状态，0:关闭；1:开启
		"cmyh": 0.0,
		
		//后备箱状态，0:关闭；1:开启
		"hbx": 0.0,
		
		//前舱盖状态
		"forwardCanopy": 0.0,
		
		//车窗左前，1:关闭
		"cczq": 1.0,
		
		//车窗左后，1:关闭
		"cczh": 1.0,
		
		//车窗右前，1:关闭
		"ccyq": 1.0,
		
		//车窗右后，1:关闭
		"ccyh": 1.0,
		
		//天窗，1:关闭
		"tianc": 1.0,
		
		//电源档位 1：OFF档；3:ON档
		"dydw": 1.0,
		
		//整车状态 0：解锁状态；1：正常状态；2：防盗
		"zczt": 2.0,
		
		//总续航
		"xh": 333.0,
		
		//燃油续航
		"oilXh": 246.0,
		
		//电池续航
		"evXh": 87.0,
		
		//最近50公里平均能耗，例如：-2.2+10.7
		"nh": "14.1+0.0",
		
		//累计能耗，例如：(8.2度+5.8升)/百公里
		"ljnh": "(9.9度+1.6升)/百公里",
		
		//总里程
		"zlc": 20551.0,
		
		//电量剩余（%）
		"soc": 79.0,
		
		//油量剩余（%）
		"soo": 21.0,
		
		//OK指示灯，0:熄灭；1:点亮
		"ok": 0.0,
		
		//轮胎压力左前状态，0:正常
		"ltylzq": 0.0,
		
		//轮胎压力右前状态，0:正常
		"ltylyq": 0.0,
		
		//轮胎压力左后状态，0:正常
		"ltylzh": 0.0,
		
		//轮胎压力右后状态，0:正常
		"ltylyh": 0.0,
		
		//轮胎压力值-左前
		"ltylzzq": 267.0,
		
		//轮胎压力值-右前
		"ltylzyq": 265.0,
		
		//轮胎压力值-左后
		"ltylzzh": 262.0,
		
		//轮胎压力值-右后
		"ltylzyh": 260.0,
		
		//胎压系统，0:正常；-1:该车无数据
		"tyxt": 0.0,
		
		//最近50公里纯电能耗
		"evNh": 14.1,
		
		//最近50公里燃油能耗
		"oilNh": 0.0,
		
		//最近50公里平均能耗
		"avgNh": 4.08,
		
		//累计纯电能耗
		"ljEvNh": 9.9,
		
		//累计燃油能耗
		"ljOilNh": 1.6,
		
		//累计平均能耗
		"ljAvgNh": 4.46,
		
		//车牌号
		"autoPlate": "粤xxxxxxx",
		
		//车辆类型，例如：宋PLUS DM-i
		"autoType": "宋PLUS DM-i",
		
		//车架号
		"vin": "LGXCxxxxxxxxxxxxx",
		
		//车辆款式名称，例如：旗舰型Plus
		"autoStyleName": "旗舰型Plus",
		
		//图表数据网址
		"chartImageUrl": ""
	}

## 15、无法完成比亚迪自动签到任务？

常见原因如下：

这个问题一般是因为PC版的微信存在兼容问题，导致无法正常加载小程序文件（打开小程序提示“下载工具资源”，或者“白屏”）

解决方法1：

比如微信3.9.6.x版本，基本都存在这个问题，解决方法：在微信的桌面快捷方式右键——属性——兼容性——兼容模式——勾选“以兼容模式运行这个程序”，然后选择“Windows 8”——确认

经过上面方法设置后，重启PC版微信，一般就可以了（如果不行，反复操作几次，取消兼容，保存，然后再设置一次兼容，然后重启电脑）

解决方法2：

有些人按照上面方法设置后，第一次打开小程序正常了，但是第二次打开小程序又变成空白页，可以按照下面的方法操作：

1）找到微信这个目录：C:\Users\改成你的用户名\AppData\Roaming\Tencent\WeChat\XPlugin\Plugins

2）删除这个目录下的3个文件夹：RadiumWMPF、ThumbPlayer、WeChatUtility（不用怕，删掉了微信也会自动重新下载的）

如果上述方法依然无法解决，这个就要自己去百度了，毕竟是微信的小程序打开有问题，小编这边也没办法~~
